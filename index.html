<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>TV UI</title>
  <style>
    body { background:#0b0b0b; margin:0; font-family:sans-serif; color:#fff; text-align:center; }
    h2 { margin:20px 0; }
    .grid { display:grid; grid-template-columns:repeat(5,1fr); gap:20px; padding:40px; }
    .tile {
      background:#1a1a1a; border:3px solid transparent; border-radius:12px;
      text-align:center; padding:12px; transition:border-color 0.2s, background 0.2s;
    }
    .tile img { width:100px; height:100px; object-fit:contain; margin-bottom:10px; }
    .tile span { display:block; font-size:14px; color:#ddd; }
    .tile.active { border-color:#4af; background:#222; }
    .yt-button {
      display:inline-block;
      margin:20px auto;
      padding:14px 28px;
      font-size:18px;
      background:#c4302b;
      color:#fff;
      border:none;
      border-radius:10px;
      cursor:pointer;
      box-shadow:0 4px 8px rgba(0,0,0,0.6);
    }
    .yt-button:hover { background:#e9453f; }
  </style>
</head>
<body>
  <h2>ðŸ“º TV App Launcher</h2>

  <div class="grid" id="grid">
    <div class="tile active" data-id="com.webos.app.photovideo">
      <img src="https://img.icons8.com/fluency/96/video.png" alt="">
      <span>Open Photo & Video</span>
    </div>
    <div class="tile" data-id="com.webos.app.browser">
      <img src="https://img.icons8.com/fluency/96/internet.png" alt="">
      <span>Web Browser</span>
    </div>
    <div class="tile" data-id="com.webos.app.music">
      <img src="https://img.icons8.com/fluency/96/musical-notes.png" alt="">
      <span>Music</span>
    </div>
  </div>

  <!-- Extra button for YouTube -->
  <button class="yt-button" onclick="launchYouTube()">â–¶ Launch YouTube Leanback</button>

  <!-- Correct runtime scripts for webOS -->
  <script src="file:///usr/palm/frameworks/enyo/2.0/enyo.js"></script>
  <script src="file:///usr/palm/frameworks/enyo/2.0/lib/webos/webos.js"></script>

  <script>
    const tiles = [...document.querySelectorAll('.tile')];
    let index = 0;

    function updateFocus(newIndex) {
      if (newIndex === index) return;
      tiles[index].classList.remove('active');
      index = (newIndex + tiles.length) % tiles.length;
      tiles[index].classList.add('active');
    }

    function runAction(tile) {
      const appId = tile.dataset.id;
      if (!appId) return;

      if (appId === "com.webos.app.photovideo") {
        webOS.service.request("luna://com.webos.applicationManager", {
          method: "launch",
          parameters: {
            id: "com.webos.app.photovideo",
            params: { payload:[{ fullPath:"https://media.w3.org/2010/05/sintel/trailer.mp4", mediaType:"VIDEO", fileName:"trailer" }] }
          },
          onSuccess: ()=>console.log("Launched PhotoVideo"),
          onFailure: (e)=>console.log("Error", e)
        });
      } else {
        webOS.service.request("luna://com.webos.applicationManager", {
          method: "launch",
          parameters: { id: appId },
          onSuccess: ()=>console.log("Launched", appId),
          onFailure: (e)=>console.log("Error", e)
        });
      }
    }

    // Keyboard navigation
    window.addEventListener('keydown', (ev)=>{
      if(ev.key === "ArrowRight") updateFocus(index+1);
      else if(ev.key === "ArrowLeft") updateFocus(index-1);
      else if(ev.key === "Enter") runAction(tiles[index]);
    });

    // Mouse click
    tiles.forEach((tile,i)=>{
      tile.addEventListener('click', ()=>{ updateFocus(i); runAction(tile); });
    });

    // Extra: Launch YouTube Leanback
    function launchYouTube() {
      var request = webOS.service.request("luna://com.webos.applicationManager", {
        method: "launch",
        parameters: { id: "youtube.leanback.v4" },
        onSuccess: function (inResponse) {
          console.log("YouTube launched");
          window.close();
        },
        onFailure: function (inError) {
          console.log("Failed to launch YouTube");
          console.log("[" + inError.errorCode + "]: " + inError.errorText);
        }
      });
    }
  </script>
</body>
</html>
