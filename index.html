<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>TV Style UI</title>
  <style>
    body { background:#0b0b0b; margin:0; font-family:sans-serif; color:#fff; }
    .grid {
      display:grid;
      grid-template-columns:repeat(5,1fr);
      gap:20px;
      padding:40px;
    }
    .tile {
      background:#1a1a1a;
      border:3px solid transparent;
      border-radius:12px;
      text-align:center;
      padding:12px;
      transition:all 0.2s;
    }
    .tile img {
      width:100px;
      height:100px;
      object-fit:contain;
      margin-bottom:10px;
    }
    .tile span {
      display:block;
      font-size:14px;
      color:#ddd;
    }
    .tile.active {
      border-color:#4af;
      background:#222;
    }
  </style>
</head>
<body>
  <div class="grid" id="grid">
    <div class="tile active" data-id="com.webos.app.photovideo">
      <img src="https://img.icons8.com/fluency/96/video.png" alt="">
      <span>Open Photo & Video</span>
    </div>
    <div class="tile" data-id="com.webos.app.browser">
      <img src="https://img.icons8.com/fluency/96/internet.png" alt="">
      <span>Web Browser</span>
    </div>
    <div class="tile" data-id="com.webos.app.cheeringtv">
      <img src="https://img.icons8.com/fluency/96/party.png" alt="">
      <span>Cheering TV</span>
    </div>
    <div class="tile" data-id="com.palm.app.settings">
      <img src="https://img.icons8.com/fluency/96/settings.png" alt="">
      <span>Settings</span>
    </div>
    <div class="tile" data-id="com.webos.app.installation">
      <img src="https://img.icons8.com/fluency/96/lock.png" alt="">
      <span>Secret Menu</span>
    </div>
    <div class="tile" data-id="com.webos.app.premium">
      <img src="https://img.icons8.com/fluency/96/shop.png" alt="">
      <span>Premium Store</span>
    </div>
    <div class="tile" data-id="com.webos.app.home">
      <img src="https://img.icons8.com/fluency/96/home.png" alt="">
      <span>Home</span>
    </div>
    <div class="tile" data-id="com.webos.app.fullhome">
      <img src="https://img.icons8.com/fluency/96/dashboard.png" alt="">
      <span>New Home</span>
    </div>
    <div class="tile" data-id="com.webos.app.music">
      <img src="https://img.icons8.com/fluency/96/musical-notes.png" alt="">
      <span>Music App</span>
    </div>
    <div class="tile" data-id="com.webos.app.discovery">
      <img src="https://img.icons8.com/fluency/96/tv.png" alt="">
      <span>Content Store</span>
    </div>
  </div>

  <!-- The missing webOS library -->
  <script src="file:///usr/palm/frameworks/enyo/1.0/framework/webos.js"></script>

  <script>
    const tiles = [...document.querySelectorAll('.tile')];
    let index = 0;

    function updateFocus() {
      tiles.forEach((t,i)=>t.classList.toggle('active', i===index));
    }

    function runAction(tile) {
      const appId = tile.dataset.id;
      if (!appId) return;

      // Special case: photovideo with payload
      if (appId === "com.webos.app.photovideo") {
        var request = webOS.service.request("luna://com.webos.applicationManager", {
          method: "launch",
          parameters: {
            id: "com.webos.app.photovideo",
            params: {
              payload: [{
                fullPath: "https://media.w3.org/2010/05/sintel/trailer.mp4",
                mediaType: "VIDEO",
                fileName: "trailer",
                lastPlayPosition: -1
              }]
            }
          },
          onSuccess: function(){ console.log("Launched PhotoVideo"); },
          onFailure: function(e){ console.log("Error", e); }
        });
      } else {
        var request = webOS.service.request("luna://com.webos.applicationManager", {
          method: "launch",
          parameters: { id: appId },
          onSuccess: function(){ console.log("Launched", appId); },
          onFailure: function(e){ console.log("Error", e); }
        });
      }
    }

    window.addEventListener('keydown', (ev)=>{
      if(ev.key === "ArrowRight") { index = (index+1)%tiles.length; updateFocus(); }
      else if(ev.key === "ArrowLeft") { index = (index-1+tiles.length)%tiles.length; updateFocus(); }
      else if(ev.key === "ArrowUp") { index = (index-5+tiles.length)%tiles.length; updateFocus(); }
      else if(ev.key === "ArrowDown") { index = (index+5)%tiles.length; updateFocus(); }
      else if(ev.key === "Enter") { runAction(tiles[index]); }
    });
  </script>
</body>
</html>
